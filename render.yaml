# Render Blueprint: MNIST inference API for Arcane docs
# Deploy this service, then set MNIST_API_URL on Vercel to the Render service URL.
# Ensure mnist_arcane_model.weights.h5 exists at repo root (train with: python examples/mnist_arcane.py).

services:
  - type: web
    name: arcane-mnist-api
    runtime: python
    region: oregon

    buildCommand: pip install -r requirements-api.txt
    startCommand: python examples/serve_mnist_api.py

    envVars:
      - key: PYTHON_VERSION
        value: "3.11"
    # Optional: override weights path if you store them elsewhere
    # - key: MNIST_WEIGHTS_PATH
    #   value: /opt/render/project/src/mnist_arcane_model.weights.h5
